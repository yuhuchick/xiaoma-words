{"version":3,"file":"announcements.js","sources":["pages/announcements/announcements.vue","pages/announcements/announcements.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- Áä∂ÊÄÅÊ†èÂç†‰Ωç -->\n\t\t<view class=\"status-bar\"></view>\n\t\t\n\t\t<!-- Â§¥ÈÉ® -->\n\t\t<view class=\"header\">\n\t\t\t<view class=\"header-content\">\n\t\t\t\t<view class=\"back-button\" @click=\"goBack\">\n\t\t\t\t\t<text class=\"back-icon\">‚Üê</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"title\">ÂÖ¨Âëä‰∏≠ÂøÉ</text>\n\t\t\t\t<view class=\"filter-button\" @click=\"showFilter\">\n\t\t\t\t\t<text class=\"filter-icon\">‚öô</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Á≠õÈÄâÊ†áÁ≠æ -->\n\t\t<view class=\"filter-tabs\" v-if=\"showFilterTabs\">\n\t\t\t<view \n\t\t\t\tv-for=\"(tab, index) in filterTabs\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t:class=\"['filter-tab', { active: activeFilter === tab.key }]\"\n\t\t\t\t@click=\"selectFilter(tab.key)\"\n\t\t\t>\n\t\t\t\t<text>{{ tab.name }}</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- ÂÖ¨ÂëäÂàóË°® -->\n\t\t<view class=\"announcement-list\">\n\t\t\t<view \n\t\t\t\tv-for=\"(announcement, index) in filteredAnnouncements\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t:class=\"['announcement-item', { unread: !isAnnouncementRead(announcement.id) }]\"\n\t\t\t\t@click=\"viewAnnouncement(announcement)\"\n\t\t\t>\n\t\t\t\t<view class=\"announcement-icon\">\n\t\t\t\t\t<text class=\"icon-text\">{{ announcement.icon }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"announcement-content\">\n\t\t\t\t\t<view class=\"announcement-header\">\n\t\t\t\t\t\t<text class=\"announcement-title\">{{ announcement.title }}</text>\n\t\t\t\t\t\t<view class=\"announcement-badges\">\n\t\t\t\t\t\t\t<view class=\"badge new\" v-if=\"announcement.isNew\">\n\t\t\t\t\t\t\t\t<text class=\"badge-text\">Êñ∞</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"badge priority\" :class=\"announcement.priority\">\n\t\t\t\t\t\t\t\t<text class=\"badge-text\">{{ getPriorityText(announcement.priority) }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"announcement-time\">{{ announcement.timeAgo }}</text>\n\t\t\t\t\t<text class=\"announcement-preview\">{{ getPreviewText(announcement.content) }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Á©∫Áä∂ÊÄÅ -->\n\t\t<view class=\"empty-state\" v-if=\"filteredAnnouncements.length === 0\">\n\t\t\t<view class=\"empty-icon\">üì¢</view>\n\t\t\t<text class=\"empty-text\">ÊöÇÊó†ÂÖ¨Âëä</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport announcementManager from '@/utils/announcementManager.js'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tannouncements: [],\n\t\t\tactiveFilter: 'all',\n\t\t\tshowFilterTabs: false,\n\t\t\tfilterTabs: [\n\t\t\t\t{ key: 'all', name: 'ÂÖ®ÈÉ®' },\n\t\t\t\t{ key: 'maintenance', name: 'Áª¥Êä§' },\n\t\t\t\t{ key: 'update', name: 'Êõ¥Êñ∞' },\n\t\t\t\t{ key: 'activity', name: 'Ê¥ªÂä®' },\n\t\t\t\t{ key: 'feature', name: 'ÂäüËÉΩ' },\n\t\t\t\t{ key: 'content', name: 'ÂÜÖÂÆπ' }\n\t\t\t]\n\t\t}\n\t},\n\tcomputed: {\n\t\tfilteredAnnouncements() {\n\t\t\tif (this.activeFilter === 'all') {\n\t\t\t\treturn this.announcements\n\t\t\t}\n\t\t\treturn this.announcements.filter(announcement => \n\t\t\t\tannouncement.type === this.activeFilter\n\t\t\t)\n\t\t}\n\t},\n\tonLoad() {\n\t\tthis.loadAnnouncements()\n\t},\n\tmethods: {\n\t\tloadAnnouncements() {\n\t\t\tthis.announcements = announcementManager.getAllAnnouncements()\n\t\t},\n\t\t\n\t\tgoBack() {\n\t\t\tuni.navigateBack()\n\t\t},\n\t\t\n\t\tshowFilter() {\n\t\t\tthis.showFilterTabs = !this.showFilterTabs\n\t\t},\n\t\t\n\t\tselectFilter(filter) {\n\t\t\tthis.activeFilter = filter\n\t\t},\n\t\t\n\t\tviewAnnouncement(announcement) {\n\t\t\t// Ê†áËÆ∞‰∏∫Â∑≤ËØª\n\t\t\tannouncementManager.markAnnouncementAsRead(announcement.id)\n\t\t\t\n\t\t\t// ÊòæÁ§∫ÂÖ¨ÂëäËØ¶ÊÉÖ\n\t\t\tuni.showModal({\n\t\t\t\ttitle: announcement.title,\n\t\t\t\tcontent: announcement.content || announcement.title,\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: () => {\n\t\t\t\t\t// ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ\n\t\t\t\t\tthis.loadAnnouncements()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\tisAnnouncementRead(announcementId) {\n\t\t\treturn announcementManager.isAnnouncementRead(announcementId)\n\t\t},\n\t\t\n\t\tgetPriorityText(priority) {\n\t\t\tconst priorityMap = {\n\t\t\t\thigh: 'ÈáçË¶Å',\n\t\t\t\tmedium: 'ÊôÆÈÄö',\n\t\t\t\tlow: '‰∏ÄËà¨'\n\t\t\t}\n\t\t\treturn priorityMap[priority] || 'ÊôÆÈÄö'\n\t\t},\n\t\t\n\t\tgetPreviewText(content) {\n\t\t\tif (!content) return ''\n\t\t\treturn content.length > 50 ? content.substring(0, 50) + '...' : content\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.container {\n\tmin-height: 100vh;\n\tbackground: #f8f9fa;\n\tpadding: 0;\n}\n\n.status-bar {\n\theight: 44px;\n\twidth: 100%;\n}\n\n.header {\n\tbackground: #ffffff;\n\tpadding: 20rpx 30rpx;\n\tborder-bottom: 1px solid #e9ecef;\n}\n\n.header-content {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.back-button {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.back-icon {\n\tfont-size: 32rpx;\n\tcolor: #4A90E2;\n}\n\n.title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #2c3e50;\n}\n\n.filter-button {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.filter-icon {\n\tfont-size: 28rpx;\n\tcolor: #6c757d;\n}\n\n.filter-tabs {\n\tbackground: #ffffff;\n\tpadding: 20rpx 30rpx;\n\tborder-bottom: 1px solid #e9ecef;\n\tdisplay: flex;\n\tgap: 20rpx;\n\toverflow-x: auto;\n}\n\n.filter-tab {\n\tpadding: 15rpx 25rpx;\n\tborder-radius: 25rpx;\n\tbackground: #f8f9fa;\n\twhite-space: nowrap;\n}\n\n.filter-tab.active {\n\tbackground: #4A90E2;\n}\n\n.filter-tab text {\n\tfont-size: 26rpx;\n\tcolor: #6c757d;\n}\n\n.filter-tab.active text {\n\tcolor: #ffffff;\n}\n\n.announcement-list {\n\tpadding: 20rpx 30rpx;\n}\n\n.announcement-item {\n\tbackground: #ffffff;\n\tborder-radius: 15rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 20rpx;\n\tdisplay: flex;\n\talign-items: flex-start;\n\tgap: 20rpx;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\ttransition: all 0.3s ease;\n}\n\n.announcement-item.unread {\n\tborder-left: 4rpx solid #4A90E2;\n\tbackground: #f8f9ff;\n}\n\n.announcement-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tbackground: #e3f2fd;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-shrink: 0;\n}\n\n.icon-text {\n\tfont-size: 28rpx;\n}\n\n.announcement-content {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10rpx;\n}\n\n.announcement-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: flex-start;\n\tgap: 15rpx;\n}\n\n.announcement-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c3e50;\n\tline-height: 1.4;\n\tflex: 1;\n}\n\n.announcement-badges {\n\tdisplay: flex;\n\tgap: 10rpx;\n\tflex-shrink: 0;\n}\n\n.badge {\n\tpadding: 5rpx 10rpx;\n\tborder-radius: 10rpx;\n}\n\n.badge.new {\n\tbackground: #ff6b6b;\n}\n\n.badge.priority {\n\tfont-size: 20rpx;\n}\n\n.badge.priority.high {\n\tbackground: #ff6b6b;\n}\n\n.badge.priority.medium {\n\tbackground: #ffa726;\n}\n\n.badge.priority.low {\n\tbackground: #66bb6a;\n}\n\n.badge-text {\n\tcolor: #ffffff;\n\tfont-size: 20rpx;\n\tfont-weight: 600;\n}\n\n.announcement-time {\n\tfont-size: 24rpx;\n\tcolor: #6c757d;\n}\n\n.announcement-preview {\n\tfont-size: 26rpx;\n\tcolor: #495057;\n\tline-height: 1.5;\n}\n\n.empty-state {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 100rpx 30rpx;\n}\n\n.empty-icon {\n\tfont-size: 80rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.empty-text {\n\tfont-size: 28rpx;\n\tcolor: #6c757d;\n}\n</style>\n","import MiniProgramPage from '/Users/david/Documents/HBuilderProjects/xiaoma-words/pages/announcements/announcements.vue'\nwx.createPage(MiniProgramPage)"],"names":["announcementManager","uni"],"mappings":";;;AAsEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,eAAe,CAAE;AAAA,MACjB,cAAc;AAAA,MACd,gBAAgB;AAAA,MAChB,YAAY;AAAA,QACX,EAAE,KAAK,OAAO,MAAM,KAAM;AAAA,QAC1B,EAAE,KAAK,eAAe,MAAM,KAAM;AAAA,QAClC,EAAE,KAAK,UAAU,MAAM,KAAM;AAAA,QAC7B,EAAE,KAAK,YAAY,MAAM,KAAM;AAAA,QAC/B,EAAE,KAAK,WAAW,MAAM,KAAM;AAAA,QAC9B,EAAE,KAAK,WAAW,MAAM,KAAK;AAAA,MAC9B;AAAA,IACD;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,wBAAwB;AACvB,UAAI,KAAK,iBAAiB,OAAO;AAChC,eAAO,KAAK;AAAA,MACb;AACA,aAAO,KAAK,cAAc;AAAA,QAAO,kBAChC,aAAa,SAAS,KAAK;AAAA,MAC5B;AAAA,IACD;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,kBAAkB;AAAA,EACvB;AAAA,EACD,SAAS;AAAA,IACR,oBAAoB;AACnB,WAAK,gBAAgBA,0BAAmB,oBAAC,oBAAoB;AAAA,IAC7D;AAAA,IAED,SAAS;AACRC,oBAAAA,MAAI,aAAa;AAAA,IACjB;AAAA,IAED,aAAa;AACZ,WAAK,iBAAiB,CAAC,KAAK;AAAA,IAC5B;AAAA,IAED,aAAa,QAAQ;AACpB,WAAK,eAAe;AAAA,IACpB;AAAA,IAED,iBAAiB,cAAc;AAE9BD,oDAAoB,uBAAuB,aAAa,EAAE;AAG1DC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO,aAAa;AAAA,QACpB,SAAS,aAAa,WAAW,aAAa;AAAA,QAC9C,YAAY;AAAA,QACZ,SAAS,MAAM;AAEd,eAAK,kBAAkB;AAAA,QACxB;AAAA,OACA;AAAA,IACD;AAAA,IAED,mBAAmB,gBAAgB;AAClC,aAAOD,0BAAmB,oBAAC,mBAAmB,cAAc;AAAA,IAC5D;AAAA,IAED,gBAAgB,UAAU;AACzB,YAAM,cAAc;AAAA,QACnB,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,KAAK;AAAA,MACN;AACA,aAAO,YAAY,QAAQ,KAAK;AAAA,IAChC;AAAA,IAED,eAAe,SAAS;AACvB,UAAI,CAAC;AAAS,eAAO;AACrB,aAAO,QAAQ,SAAS,KAAK,QAAQ,UAAU,GAAG,EAAE,IAAI,QAAQ;AAAA,IACjE;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrJA,GAAG,WAAW,eAAe;"}