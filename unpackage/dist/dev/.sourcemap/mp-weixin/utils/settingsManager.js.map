{"version":3,"file":"settingsManager.js","sources":["utils/settingsManager.js"],"sourcesContent":["class SettingsManager {\n\tconstructor() {\n\t\tthis.storageKey = 'appSettings'\n\t\tthis.settings = {\n\t\t\t// 每日目标新学习单词数\n\t\t\tdailyNewWordsTarget: 20,\n\t\t\t// 超额时是否允许继续学习（可用于家长或严格模式）\n\t\t\tallowExceed: true\n\t\t}\n\t}\n\t\n\tinit() {\n\t\ttry {\n\t\t\tconst raw = uni.getStorageSync(this.storageKey)\n\t\t\tif (raw) {\n\t\t\t\tconst parsed = JSON.parse(raw)\n\t\t\t\tthis.settings = { ...this.settings, ...parsed }\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// ignore and keep defaults\n\t\t}\n\t}\n\t\n\tsave() {\n\t\ttry {\n\t\t\tuni.setStorageSync(this.storageKey, JSON.stringify(this.settings))\n\t\t} catch (e) {}\n\t}\n\t\n\tgetSettings() {\n\t\treturn { ...this.settings }\n\t}\n\t\n\tsetDailyNewWordsTarget(value) {\n\t\tconst num = parseInt(value)\n\t\tif (!Number.isFinite(num) || num <= 0) {\n\t\t\tthrow new Error('目标必须是正整数')\n\t\t}\n\t\tthis.settings.dailyNewWordsTarget = num\n\t\tthis.save()\n\t}\n\t\n\tsetAllowExceed(flag) {\n\t\tthis.settings.allowExceed = !!flag\n\t\tthis.save()\n\t}\n}\n\nexport default new SettingsManager()\n"],"names":["uni"],"mappings":";;AAAA,MAAM,gBAAgB;AAAA,EACrB,cAAc;AACb,SAAK,aAAa;AAClB,SAAK,WAAW;AAAA;AAAA,MAEf,qBAAqB;AAAA;AAAA,MAErB,aAAa;AAAA,IACb;AAAA,EACD;AAAA,EAED,OAAO;AACN,QAAI;AACH,YAAM,MAAMA,cAAG,MAAC,eAAe,KAAK,UAAU;AAC9C,UAAI,KAAK;AACR,cAAM,SAAS,KAAK,MAAM,GAAG;AAC7B,aAAK,WAAW,EAAE,GAAG,KAAK,UAAU,GAAG,OAAQ;AAAA,MAC/C;AAAA,IACD,SAAQ,GAAG;AAAA,IAEX;AAAA,EACD;AAAA,EAED,OAAO;AACN,QAAI;AACHA,0BAAI,eAAe,KAAK,YAAY,KAAK,UAAU,KAAK,QAAQ,CAAC;AAAA,IACpE,SAAW,GAAG;AAAA,IAAE;AAAA,EACd;AAAA,EAED,cAAc;AACb,WAAO,EAAE,GAAG,KAAK,SAAU;AAAA,EAC3B;AAAA,EAED,uBAAuB,OAAO;AAC7B,UAAM,MAAM,SAAS,KAAK;AAC1B,QAAI,CAAC,OAAO,SAAS,GAAG,KAAK,OAAO,GAAG;AACtC,YAAM,IAAI,MAAM,UAAU;AAAA,IAC1B;AACD,SAAK,SAAS,sBAAsB;AACpC,SAAK,KAAM;AAAA,EACX;AAAA,EAED,eAAe,MAAM;AACpB,SAAK,SAAS,cAAc,CAAC,CAAC;AAC9B,SAAK,KAAM;AAAA,EACX;AACF;AAEA,MAAA,kBAAe,IAAI,gBAAe;;"}